<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社區藥物知識問答遊戲</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #87CEEB, #0046AD);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            padding: 40px; /* 增加内边距 */
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em; /* 所有字体放大两倍 */
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 1200px; /* 增加宽度 */
            width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 60px; /* 增加间距 */
            color: white;
            text-shadow: 0 4px 8px rgba(0,0,0,0.5); /* 增加阴影 */
            animation: fadeInDown 1s ease;
        }
        
        header h1 {
            font-size: 4.5rem; /* 增大标题 */
            margin-bottom: 30px;
            color: #FFCC00; /* 香港赛马会黄 */
            text-shadow: 0 4px 8px rgba(0,0,0,0.5);
            letter-spacing: 2px;
        }
        
        header p {
            font-size: 2.2rem; /* 增大副标题 */
            max-width: 1000px; /* 增加宽度 */
            margin: 0 auto;
            line-height: 1.8; /* 增加行高 */
            background: rgba(0, 70, 173, 0.7);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            padding: 50px; /* 增加内边距 */
            animation: fadeInUp 1s ease;
            position: relative;
            overflow: hidden;
            border: 6px solid #FFCC00; /* 香港赛马会黄边框 */
        }
        
        .game-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: linear-gradient(to right, #3498db, #9b59b6, #2ecc71, #e74c3c, #f39c12);
        }
        
        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 50px; /* 增加间距 */
            padding: 20px 0; /* 增加内边距 */
            border-bottom: 4px solid #f1f1f1; /* 加粗边框 */
        }
        
        .progress-bar {
            flex-grow: 1;
            height: 24px; /* 加高进度条 */
            background: #e0e0e0;
            border-radius: 20px;
            margin: 0 30px; /* 增加边距 */
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2ecc71);
            border-radius: 20px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .question-counter {
            background: #0046AD; /* 香港赛马会蓝 */
            color: white;
            padding: 15px 30px; /* 增加内边距 */
            border-radius: 30px;
            font-weight: bold;
            min-width: 200px; /* 增加宽度 */
            text-align: center;
            font-size: 2rem; /* 增大字体 */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .question-container {
            margin: 50px 0 70px; /* 增加边距 */
            padding: 40px; /* 增加内边距 */
            background: #f8f9fa;
            border-radius: 25px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            position: relative;
            border: 4px solid #0046AD; /* 香港赛马会蓝边框 */
        }
        
        .question-container h2 {
            font-size: 3.2rem; /* 增大问题字体 */
            color: #0046AD; /* 香港赛马会蓝 */
            margin-bottom: 40px; /* 增加间距 */
            line-height: 1.6; /* 增加行高 */
            font-weight: 700;
        }
        
        .question-type {
            position: absolute;
            top: -25px; /* 调整位置 */
            right: 40px; /* 调整位置 */
            background: #FFCC00; /* 香港赛马会黄 */
            color: #0046AD; /* 香港赛马会蓝 */
            padding: 15px 30px; /* 增加内边距 */
            border-radius: 30px;
            font-size: 2rem; /* 增大字体 */
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); /* 增加选项宽度 */
            gap: 30px; /* 增加间距 */
            margin: 50px 0; /* 增加边距 */
        }
        
        .option {
            background: white;
            border: 4px solid #e0e0e0; /* 加粗边框 */
            border-radius: 20px;
            padding: 30px 40px; /* 增加内边距 */
            font-size: 2.2rem; /* 增大选项字体 */
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            text-align: left;
        }
        
        .option:hover {
            transform: translateY(-5px); /* 增加悬停效果 */
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            border-color: #3498db;
        }
        
        .option.selected {
            background: #e3f2fd;
            border-color: #3498db;
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
            transform: translateY(-3px);
        }
        
        .option-letter {
            display: inline-block;
            width: 60px; /* 增大字母框 */
            height: 60px; /* 增大字母框 */
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 60px; /* 调整行高 */
            font-weight: bold;
            margin-right: 30px; /* 增加间距 */
            flex-shrink: 0;
            font-size: 2.5rem; /* 增大字母字体 */
        }
        
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px; /* 增加间距 */
        }
        
        .btn {
            padding: 25px 50px; /* 增大按钮 */
            font-size: 2.2rem; /* 增大按钮字体 */
            border: none;
            border-radius: 60px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px; /* 增加图标间距 */
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.25);
        }
        
        .btn:active {
            transform: translateY(2px);
        }
        
        .btn-prev {
            background: #7f8c8d;
            color: white;
        }
        
        .btn-next {
            background: #0046AD; /* 香港赛马会蓝 */
            color: white;
        }
        
        .btn-submit {
            background: #FFCC00; /* 香港赛马会黄 */
            color: #0046AD; /* 香港赛马会蓝 */
            margin-left: auto;
        }
        
        .btn-restart {
            background: #0046AD; /* 香港赛马会蓝 */
            color: #FFCC00; /* 香港赛马会黄 */
            margin: 40px auto; /* 增加间距 */
            display: block;
            padding: 30px 70px; /* 增大按钮 */
            font-size: 2.5rem; /* 增大字体 */
        }
        
        .score-container {
            text-align: center;
            margin-top: 50px; /* 增加间距 */
            padding: 50px; /* 增加内边距 */
            background: linear-gradient(135deg, #87CEEB, #0046AD);
            border-radius: 30px;
            color: white;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border: 6px solid #FFCC00; /* 香港赛马会黄边框 */
        }
        
        .score-container h3 {
            font-size: 3.5rem; /* 增大字体 */
            margin-bottom: 30px; /* 增加间距 */
        }
        
        .score-value {
            font-size: 6rem; /* 增大分数字体 */
            font-weight: bold;
            background: linear-gradient(to right, #FFCC00, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            margin: 30px 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 30px;
            width: 90%;
            max-width: 800px; /* 增加宽度 */
            padding: 60px; /* 增加内边距 */
            text-align: center;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            animation: modalIn 0.5s ease;
            position: relative;
            border: 6px solid #FFCC00; /* 香港赛马会黄边框 */
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(-70px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-icon {
            font-size: 120px; /* 增大图标 */
            margin-bottom: 40px; /* 增加间距 */
        }
        
        .correct .modal-icon {
            color: #2ecc71;
        }
        
        .incorrect .modal-icon {
            color: #e74c3c;
        }
        
        .modal-message {
            font-size: 2.8rem; /* 增大消息字体 */
            margin-bottom: 50px; /* 增加间距 */
            line-height: 1.6;
        }
        
        .correct-answer {
            background: #f8f9fa;
            padding: 30px; /* 增加内边距 */
            border-radius: 20px;
            margin: 40px 0; /* 增加间距 */
            font-size: 2.2rem; /* 增大字体 */
            border-left: 8px solid #3498db; /* 加粗边框 */
        }
        
        .close-modal {
            position: absolute;
            top: 30px; /* 调整位置 */
            right: 30px; /* 调整位置 */
            background: #f1f1f1;
            width: 80px; /* 增大关闭按钮 */
            height: 80px; /* 增大关闭按钮 */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 3rem; /* 增大图标 */
        }
        
        .close-modal:hover {
            background: #e74c3c;
            color: white;
            transform: rotate(90deg);
        }
        
        footer {
            text-align: center;
            color: white;
            margin-top: 60px; /* 增加间距 */
            font-size: 1.8rem; /* 增大字体 */
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            background: rgba(0, 70, 173, 0.7);
            padding: 30px; /* 增加内边距 */
            border-radius: 20px;
        }
        
        /* 动画效果 */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(60px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-60px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            body {
                font-size: 1.8em; /* 调整字体大小 */
                padding: 30px;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                padding: 20px 40px;
                font-size: 1.8rem;
            }
            
            header h1 {
                font-size: 3.8rem;
            }
            
            .question-container h2 {
                font-size: 2.8rem;
            }
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 1.5em;
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 30px; /* 增加间距 */
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            header h1 {
                font-size: 3rem;
            }
            
            .question-container h2 {
                font-size: 2.2rem;
            }
            
            .game-card {
                padding: 30px;
            }
            
            .option {
                padding: 20px 25px;
                font-size: 1.8rem;
            }
        }
        
        .hk-jockey-club-logo {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .logo-inner {
            width: 120px;
            height: 120px;
            background: #0046AD;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #FFCC00;
            font-size: 3.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="hk-jockey-club-logo">
        <div class="logo-inner">
            HKJC
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-pills"></i> 社區藥物知識問答遊戲</h1>
            <p>測試您對藥物存放、分類、藥房區別以及社區藥房服務的了解程度</p>
        </header>
        
        <div class="game-card">
            <div class="progress-container">
                <div class="question-counter">問題 <span id="current-q">1</span>/<span id="total-q">10</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div class="score-display">分數: <span id="score">0</span></div>
            </div>
            
            <div class="question-container">
                <div class="question-type" id="question-type">多選題</div>
                <h2 id="question"></h2>
                <div class="options-grid" id="options"></div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-prev" id="prevButton">
                    <i class="fas fa-arrow-left"></i> 上一題
                </button>
                <button class="btn btn-submit" id="submit">
                    <i class="fas fa-paper-plane"></i> 提交答案
                </button>
                <button class="btn btn-next" id="nextButton">
                    下一題 <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <div class="modal" id="resultModal">
            <div class="modal-content" id="modalContent">
                <div class="close-modal" id="closeModal">
                    <i class="fas fa-times"></i>
                </div>
                <div class="modal-icon" id="modalIcon"></div>
                <div class="modal-message" id="modalMessage"></div>
                <div class="correct-answer" id="correctAnswer"></div>
                <button class="btn btn-next" id="modalNextButton">
                    下一題 <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <footer>
            <p>本遊戲旨在提高社區藥物安全知識，不作為醫療建議 | 知識來源：香港衛生署</p>
        </footer>
    </div>

    <script>
        const questions = [
            {
                question: "下列哪項是正確家中存放藥物的方法？（請選擇兩個選項）",
                options: [
                    "A. 將不同藥物存放在同一個容器裏，以節省空間", 
                    "B. 放置在陰涼乾爽處，避免陽光照射", 
                    "C. 放置在高處，避免兒童誤服"
                ],
                answer: [1, 2],
                type: "multiple"
            },
            {
                question: "哪類藥物無需醫生處方，但需要在藥劑師的監督下售賣？（請選擇一個選項）",
                options: [
                    "A. 處方藥物", 
                    "B. 監督售賣藥物", 
                    "C. 非處方藥物"
                ],
                answer: [1],
                type: "single"
            },
            {
                question: "藥房和藥行的主要區別在於：（請選擇一個選項）",
                options: [
                    "A. 藥房須有藥劑師當值", 
                    "B. 藥行可配售處方藥物", 
                    "C. 藥行有 Rx 標誌"
                ],
                answer: [0],
                type: "single"
            },
            {
                question: "「Rx 標誌」只可出現在哪類商店？（請選擇一個選項）",
                options: [
                    "A. 藥行", 
                    "B. 藥坊", 
                    "C. 藥房"
                ],
                answer: [2],
                type: "single"
            },
            {
                question: "下列哪些屬於社區藥房常見服務？（請選擇兩個選項）",
                options: [
                    "A. 指導使用血壓計", 
                    "B. 講解用藥須知", 
                    "C. 外科手術"
                ],
                answer: [0, 1],
                type: "multiple"
            },
            {
                question: "藥劑師在社區藥房的主要職責包括？（請選擇兩個選項）",
                options: [
                    "A. 診症", 
                    "B. 按醫生處方配售藥物", 
                    "C. 小病小痛管理"
                ],
                answer: [1, 2],
                type: "multiple"
            },
            {
                question: "藥劑師在社區藥房會提供的服務有哪些？（請選擇兩個選項）",
                options: [
                    "A. 社區藥物管理服務", 
                    "B. 藥物相互作用檢查", 
                    "C. 外科縫合"
                ],
                answer: [0, 1],
                type: "multiple"
            },
            {
                question: "下列哪些是社區藥房常見的醫療器材？（請選擇兩個選項）",
                options: [
                    "A. 家用血糖機", 
                    "B. 血壓計", 
                    "C. 人工心肺機"
                ],
                answer: [0, 1],
                type: "multiple"
            },
            {
                question: "下列哪些屬於社區藥房的慢性疾病管理服務？（請選擇兩個選項）",
                options: [
                    "A. 評估藥物是否適合病人服用，並作出藥物建議", 
                    "B. 指導正確使用家用血壓計/血糖機，以監察日常血壓或血糖水平",
                    "C. 進行心臟手術"
                ],
                answer: [0, 1],
                type: "multiple"
            },
            {
                question: "藥劑師可以協助解決的藥物問題包括？（請選擇兩個選項）",
                options: [
                    "A. 忘記吃藥後續方法", 
                    "B. 藥物會否引起嗜睡等不良反應", 
                    "C. 沒有處方情況下配售處方藥物"
                ],
                answer: [0, 1],
                type: "multiple"
            }
        ];
        
        let currentQuestion = 0;
        let score = 0;
        let selectedAnswers = [];
        let userAnswers = Array(questions.length).fill(null);
        
        // DOM元素
        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const scoreEl = document.getElementById('score');
        const currentQEl = document.getElementById('current-q');
        const totalQEl = document.getElementById('total-q');
        const progressEl = document.getElementById('progress');
        const questionTypeEl = document.getElementById('question-type');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const submitButton = document.getElementById('submit');
        const modal = document.getElementById('resultModal');
        const modalIcon = document.getElementById('modalIcon');
        const modalMessage = document.getElementById('modalMessage');
        const correctAnswerEl = document.getElementById('correctAnswer');
        const modalNextButton = document.getElementById('modalNextButton');
        const closeModal = document.getElementById('closeModal');
        
        // 初始化
        function initGame() {
            totalQEl.textContent = questions.length;
            loadQuestion();
            updateProgress();
        }
        
        // 加载问题
        function loadQuestion() {
            const q = questions[currentQuestion];
            questionEl.textContent = q.question;
            questionTypeEl.textContent = q.type === 'single' ? '單選題' : '多選題';
            currentQEl.textContent = currentQuestion + 1;
            
            // 清空选项
            optionsEl.innerHTML = '';
            
            // 添加选项
            q.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option';
                if (userAnswers[currentQuestion] && userAnswers[currentQuestion].includes(index)) {
                    optionEl.classList.add('selected');
                }
                
                optionEl.innerHTML = `
                    <div class="option-letter">${option.charAt(0)}</div>
                    <div class="option-text">${option.substring(3)}</div>
                `;
                
                optionEl.addEventListener('click', () => selectAnswer(index, optionEl));
                optionsEl.appendChild(optionEl);
            });
            
            // 更新按钮状态
            prevButton.disabled = currentQuestion === 0;
            nextButton.disabled = currentQuestion === questions.length - 1;
        }
        
        // 选择答案
        function selectAnswer(index, element) {
            const q = questions[currentQuestion];
            
            if (q.type === 'single') {
                // 单选逻辑：移除其他选择，只保留当前选项
                document.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                element.classList.add('selected');
                selectedAnswers = [index];
            } else {
                // 多选逻辑：切换选择状态
                element.classList.toggle('selected');
                if (selectedAnswers.includes(index)) {
                    selectedAnswers = selectedAnswers.filter(i => i !== index);
                } else {
                    selectedAnswers.push(index);
                }
            }
            
            // 保存用户答案
            userAnswers[currentQuestion] = [...selectedAnswers];
        }
        
        // 提交答案
        function submitAnswer() {
            if (selectedAnswers.length === 0) {
                showModal('請選擇答案', '請至少選擇一個答案', '❌');
                return;
            }
            
            const q = questions[currentQuestion];
            const correctAnswers = q.answer.sort().join(',');
            const userAnswersSorted = [...selectedAnswers].sort().join(',');
            
            if (correctAnswers === userAnswersSorted) {
                score++;
                scoreEl.textContent = score;
                showModal('回答正確！', '恭喜您回答正確！', '✅');
            } else {
                // 构建正确答案字符串
                let correctOptions = q.answer.map(i => q.options[i]).join('<br>');
                showModal('回答不正確', `正確答案是：<br>${correctOptions}`, '❌');
            }
        }
        
        // 显示结果模态框
        function showModal(title, message, icon) {
            modalIcon.textContent = icon;
            modalMessage.innerHTML = `<strong>${title}</strong><br>${message}`;
            
            // 设置模态框样式
            if (icon === '✅') {
                modalContent.classList.add('correct');
                modalContent.classList.remove('incorrect');
            } else {
                modalContent.classList.add('incorrect');
                modalContent.classList.remove('correct');
            }
            
            modal.style.display = 'flex';
        }
        
        // 下一题
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                selectedAnswers = userAnswers[currentQuestion] || [];
                loadQuestion();
                updateProgress();
                modal.style.display = 'none';
            } else {
                endGame();
            }
        }
        
        // 上一题
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                selectedAnswers = userAnswers[currentQuestion] || [];
                loadQuestion();
                updateProgress();
                modal.style.display = 'none';
            }
        }
        
        // 更新进度条
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressEl.style.width = `${progress}%`;
        }
        
        // 结束游戏
        function endGame() {
            document.querySelector('.game-card').innerHTML = `
                <div class="score-container">
                    <h3>遊戲結束！</h3>
                    <div class="score-value">${score}/${questions.length}</div>
                    <p>${score >= questions.length * 0.8 ? '太棒了！您對社區藥物知識掌握得很好！' : 
                       score >= questions.length * 0.6 ? '不錯的表現！再多學習一些藥物知識會更好！' : 
                       '加油！藥物知識對健康很重要，請繼續學習！'}</p>
                </div>
                <button class="btn btn-restart" id="restartButton">
                    <i class="fas fa-redo"></i> 再玩一次
                </button>
            `;
            
            document.getElementById('restartButton').addEventListener('click', restartGame);
        }
        
        // 重新开始游戏
        function restartGame() {
            currentQuestion = 0;
            score = 0;
            selectedAnswers = [];
            userAnswers = Array(questions.length).fill(null);
            scoreEl.textContent = '0';
            initGame();
        }
        
        // 事件监听
        submitButton.addEventListener('click', submitAnswer);
        prevButton.addEventListener('click', prevQuestion);
        nextButton.addEventListener('click', nextQuestion);
        modalNextButton.addEventListener('click', nextQuestion);
        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        // 初始化游戏
        window.addEventListener('DOMContentLoaded', initGame);
        
        // 模态框DOM
        const modalContent = document.getElementById('modalContent');
    </script>
</body>
</html>
